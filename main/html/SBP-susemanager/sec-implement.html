<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Implementation</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><style type="text/css">
body { background-image: url('static/images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="Advanced Patch Lifecycle Management with SUSE Manager" /><link rel="up" href="index.html" title="Advanced Patch Lifecycle Management with SUSE Manager" /><link rel="prev" href="index.html" title="Advanced Patch Lifecycle Management with SUSE Manager" /><link rel="next" href="sec-usage.html" title="Usage Workflows" /></head><body onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Implementation</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="index.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="sec-usage.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sec-implement"></a>Implementation</h2></div></div></div><p>Let’s review. We need to set up SUSE Manager and create a set
            of procedures, processes, and/or tools (scripts) to help us
            with our patch lifecycle management. This will include the
            creation (and optimally an <span class="quote">“<span class="quote">automatic</span>”</span> creation)
            of patch archive channels from the SUSE provided
                <span class="quote">“<span class="quote">updates</span>”</span> channels for the versions of SUSE
            Linux Enterprise Server we use. These patch archives will be
            the sources for our patch promotions, but can also be a source
            to set up testing environments based on a patch set rolled out
            in the past. This could be used to troubleshoot an error
            condition for example, by creating a lab full of hosts patched
            up to any previous patch set. We can also demonstrate and
            visualize a clear view of compliance defined by a time-stamped
            set of patches.</p><p>We also need to create a set of software channels that will
            get our updates when <span class="strong"><strong>we</strong></span>
            decide to roll them out. Each landscape needs to receive them
            from the previous <span class="quote">“<span class="quote">validated</span>”</span> landscape <span class="strong"><strong>only</strong></span>. This means they will first
            get put into DEV, and are tested on the machines there. Then
            they move into QA and get tested there. Finally they get moved
            into PROD. The whole thing will start over every quarter, and
            we will handle exceptions if and when they occur. Every
            exception will be tracked by another established process with
            the constant goal of re-mediating any exception and making sure
            the patch is reintroduced as quickly as possible to ensure our
            clear view of compliance.</p><p>Other interruptions to a quarterly roll out might be the
            release of a <span class="quote">“<span class="quote">critical</span>”</span> security patch that needs
            to be deployed more rapidly than once-a-quarter. To handle this
            extra schedule, we should create an addition channel for any
            critical patches to track them and their roll out. Patches that
            should be considered as critical patches are any CVE that has a
            CVSS score of 7.1 or greater, or otherwise that is mandated by
            our corporate security organization. We have two different SUSE
            Linux Enterprise Server versions that we currently manage: SUSE
            Linux Enterprise Server 11 SP3 and SUSE Linux Enterprise Server
            12. We want to plan for using SUSE Manager to assist with
            service pack migrations, so setting up to account for SUSE
            Linux Enterprise Server 11 SP4 initially would be ideal. We
            also maintain both 32-bit and 64-bit Intel/AMD architecture
            versions of SUSE Linux Enterprise Server 11 SP3 so we will need
            to account for both of them.</p><p>There are two different environments we need to manage:
            Corporate (CORP) and Store (STORE). We have created separate
            SUSE Manager organizations to allow our systems administrators
            an exclusive view of the hosts they are responsible for. Each
            SUSE Manager organization has the three landscapes (DEV, QA,
            and PROD) that they use for patch testing/promotion.</p><p>Activation keys and bootstraps should be created for each
            SUSE Manager organization (each environment) and each landscape
            so that hosts can be registered into their appropriate, and
            most likely, permanent role. For example, a bootstrap script
            will register a SUSE Linux Enterprise Server 11 SP3 (64-bit)
            DEV host into the correct organization and will add the
            appropriate base and child channels that should never need to
            be manipulated again. Automation is preferred. As mentioned,
            the use of scripts or scheduled jobs would greatly enhance the
            solution and provide relief to the administration staff.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-arch"></a>Architecture</h3></div></div></div><p>Here is a high-level outline of the architecture and
                channels:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Use of Prefixes</h3><p>For any <span class="strong"><strong>Base</strong></span>
                    channel listed here–this can be a clone tree of the
                    SUSE vendor channels–as such it would include a
                        <span class="italic">prefix-</span> in the
                    name. This can aid the handling of service pack
                    migrations described in the channel creation sections
                    that follow.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>SUSE Manager Organization</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Default (Main) - 1</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>32-bit Archive Channels
                                     (Public)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Q2 - 06-30-2015 - SLES 11 SP3
                                     Updates for i586</p></li><li class="listitem"><p>Q3 - 09-30-2015 - SLES 11 SP3
                                     Updates for i586</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>64-bit Archive Channels
                                     (Public)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Q2 - 06-30-2015 - SLES 11 SP3
                                     Updates for x86_64</p></li><li class="listitem"><p>Q3 - 09-30-2015 - SLES 11 SP3
                                     Updates for x86_64</p></li><li class="listitem"><p>Q2 - 06-30-2015 - SLES 12
                                     Updates for x86_64</p></li><li class="listitem"><p>Q3 - 09-30-2015 - SLES 12
                                     Updates for x86_64</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Clone Sets or Child Channels
                                     within SUSE Base Channels</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Base : SLES 11 SP3 Pool for
                                     i586</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DEV - Current Patch Set - SLES
                                     11 SP3 Updates for i586</p></li><li class="listitem"><p>QA - Current Patch Set - SLES 11
                                     SP3 Updates for i586</p></li><li class="listitem"><p>PROD - Current Patch Set - SLES
                                     11 SP3 Updates for i586</p></li><li class="listitem"><p>Patch Exceptions (DO NOT
                                     SUBSCRIBE) - SLES 11 SP3 i586</p></li><li class="listitem"><p>Security ASAP Exceptions - SLES
                                     11 SP3 i586</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Base : SLES 11 SP3 Pool for
                                     x86_64</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DEV - Current Patch Set - SLES
                                     11 SP3 Updates for x86_64</p></li><li class="listitem"><p>QA - Current Patch Set - SLES 11
                                     SP3 Updates for x86_64</p></li><li class="listitem"><p>PROD - Current Patch Set - SLES
                                     11 SP3 Updates for x86_64</p></li><li class="listitem"><p>Patch Exceptions (DO NOT
                                     SUBSCRIBE) - SLES 11 SP3 x86_64</p></li><li class="listitem"><p>Security ASAP Exceptions - SLES
                                     11 SP3 x86_64</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Base : SLES 12 SP3 Pool for
                                     x86_64</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>DEV - Current Patch Set - SLES
                                     12 Updates for x86_64</p></li><li class="listitem"><p>QA - Current Patch Set - SLES 12
                                     Updates for x86_64</p></li><li class="listitem"><p>PROD - Current Patch Set - SLES
                                     12 Updates for x86_64</p></li><li class="listitem"><p>Patch Exceptions (DO NOT
                                     SUBSCRIBE) - SLES 12 x86_64</p></li><li class="listitem"><p>Security ASAP Exceptions - SLES
                                     12 x86_64</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Patch Exceptions Channels (as
                                     above)</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Per Base Channel - 1 channel for
                                     each <span class="quote">“<span class="quote">Updates</span>”</span>
                                     channel:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Examples:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Patch Exceptions (DO NOT
                                     SUBSCRIBE) - SLES 11 SP3 i586</p></li><li class="listitem"><p>Security ASAP Exceptions - SLES
                                     11 SP3 i586</p></li></ul></div></li></ul></div></li></ul></div></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Corporate (CORP) - 2</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Any public channel will be
                                     visible here</p></li><li class="listitem"><p>Private channels can be shared
                                     per organization</p></li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Store (STORE) - 3</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>Any public channel will be
                                     visible here</p></li><li class="listitem"><p>Private channels can be shared
                                     per organization</p></li></ul></div></li></ul></div></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-design"></a>Automation and Process Design</h3></div></div></div><p>Automation will include automatic channel clone creation
                for the Archive channels. To best suit a particular
                company’s use cases and product usage, a combination of
                scripts (cron and Bash) and a configuration file will be
                used. The archive creation will be triggered by a custom
                cron job as follows. Criteria for dates will determine the
                exact setup. For example, a quarterly schedule could be
                implemented based on the first or last day of a given
                quarter. If the trigger time is the <span class="strong"><strong>end</strong></span> of a quarter, it would need to consider
                day 30 on the 3<sup>rd</sup> and
                    9<sup>th</sup> months of a calendar
                (March and September), and day 31 on the
                    6<sup>th</sup> and
                    12<sup>th</sup> months (June and
                December). This will require two crontab entries such as
                (cron syntax):</p><pre class="screen">0 0 30 6,9 * /path/to/archive-create-script</pre><pre class="screen">00 0 31 3,12 * /path/to/archive-create-script</pre><p> If the trigger for the quarter is going to happen on the
                    1<sup>st</sup> of a month, then only
                one crontab entry would be required, for example:</p><pre class="screen">0 0 1 1,4,7,10 * /path/to/archive-create-script</pre><p>The actual <span class="quote">“<span class="quote">archive-create-script</span>”</span> will also
                need logic in it to determine the quarter it was run and
                formatting logic to provide the correct syntax for SUSE
                Manager channel cloning, etc. The script should also loop
                through each architecture and SUSE Linux Enterprise Server
                version to make a full set of archives based on the
                company’s choices. Processes for patch promotion will be
                created so that administrators can precisely and explicitly
                define when a patch set is moved <span class="strong"><strong>into</strong></span> a given landscape, and just as
                importantly, from <span class="strong"><strong>where</strong></span>.
                The easiest method to do this is using a script that
                leverages the XMLRPC API exposed in SUSE Manager. The API
                contains <span class="quote">“<span class="quote">softwareChannel</span>”</span> methods called
                    <span class="quote">“<span class="quote">mergePackages</span>”</span> and
                    <span class="quote">“<span class="quote">mergeErrata</span>”</span>. These two methods can be
                called with a source channel and target channel to quickly
                take content from one channel and merge the differences
                into another.</p><p>The last process will define a workflow for removing a
                patch from the promotion process–and making sure it is
                stored to be tracked. These patch exceptions can later be
                reintroduced to a patch roll out calendar as the reason for
                the exception is re-mediated. In addition to the exception
                process of <span class="strong"><strong>removing</strong></span> a
                patch, there is a similar process for <span class="strong"><strong>adding</strong></span> a patch as an emergency
                dictates.</p><p>Emergency patches will likely always be available in the
                current SUSE Updates channels, but might not have been
                introduced into an archive channel yet. As the quarterly
                archive channel creation job is triggered, any available
                patches would be part of an archive set, however at any
                other given point in time, this might have occurred before
                the patch was released or it may be up to three months
                until a new archive is created that contains this recent
                patch. A method for searching and then copying a patch into
                a target channel will need to be created. This will handle
                those times when a critical patch is released by SUSE but
                your archive channel will not get a copy until the quarter
                is up.</p><p>Copying these emergency patches into place does not
                affect the normal deployments or creation of archive
                channels. The next archive channel creation will also
                contain this patch, and the use of an emergency patch
                channel with a duplicate patch (in the case of merging the
                same patch later) will not cause any conflicts with a
                system that already has installed it.</p><p>Further explanation can be found below in <a class="xref" href="sec-implement.html#sec-exception" title="Exception and Escalation Channels">the section called “Exception and Escalation Channels”</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-patchpromo"></a>Patch Promotion Cycle</h3></div></div></div><p>Understanding how patches (and the packages they include)
                are obtained from SUSE, where they go after download, and
                how they are arranged within SUSE Manager is key to setting
                up the Advanced Patch Lifecycle system. By default, SUSE
                Manager arranges its channel sets by a particular version
                and architecture of SUSE Linux Enterprise Server and its
                extensions.</p><p>For example, a base set of channels within SUSE Manager
                for SUSE Linux Enterprise Server 11 SP3 x86_64 includes the
                parent or base channel called a <span class="quote">“<span class="quote">pool</span>”</span>
                channel. This channel contains packages that are the
                functional equivalent of the installation DVD for SUSE
                Linux Enterprise Server 11 SP3 64-bit. Under this pool
                channel are all of the <span class="quote">“<span class="quote">child</span>”</span> channels which
                include a channel for the SUSE Manager Client packages,
                called SUSE Manager Tools channel, and an updates channel
                called, in this case, SUSE Linux Enterprise Server 11 SP3
                Updates for x86_64.</p><p>A normal set of channels that a managed host subscribes
                to will include at least a parent channel (pool), a SUSE
                Manager Tools channel, and an Updates channel. In some
                cases like SUSE Linux Enterprise Server 11 SP2, this will
                include the SUSE Linux Enterprise Server 11 SP1 Pool, the
                SP1 Updates channel, the SP2 Core channel, SP2 Updates, SP2
                Extension Store, and the SP2 SUSE Manager Tools
                channel.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Long Term Service Pack Support (LTSS)</h3><p>Because both SUSE Linux Enterprise Server SP1 and SP2
                    are in their LTSS phase, there are no longer any
                    non-LTSS updates being created from SUSE. This means
                    that any SP1 or SP2 hosts a company might have will
                    need to purchase LTSS and use the LTSS Updates channel
                    to receive further patches and support. Visit
                        <a class="link" href="http://www.suse.com/lifecycle" target="_top">http://www.suse.com/lifecycle</a>
                    for more information.</p></div><p>Here is a graphic that illustrates the patch promotion
                process:</p><div class="figure"><a id="id1602"></a><p class="title"><strong>Figure 1. Patch Promotion Process</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/process-flow.png" width="100%" alt="Patch Promotion Process" /></td></tr></table></div></div></div><br class="figure-break" /></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-exception"></a>Exception and Escalation Channels</h3></div></div></div><p>There might be several reasons to delay or remove a patch
                from a deployment cycle. A patch could be causing issues
                with the stability of a system or systems, it might not
                have passed a testing cycle from the current or previous
                landscape, or there could be some other reason not to
                deploy it within a patch cycle. On the other hand, there
                might be a reason to deploy a critical patch (one that
                patches a security vulnerability or a debilitating bug)
                ahead of schedule. Because of the critical nature of the patch
                it needs to go through testing and deployment as fast as
                possible– without waiting for the next quarterly patch
                cycle.</p><p>To handle the periodic removal or addition of these
                exception patches, processes should be created to track
                them appropriately. While these exceptions are being
                tracked, they will be copied into their own channel
                containers for safekeeping, accounting, and
                reporting.</p><p>These channels can be created within the Archive base
                channel or within the cloned base channel for the version
                of SUSE Linux Enterprise Server that corresponds to the
                patch exception (recommended).</p><p>The process for excluding a patch will be to first
                    <span class="strong"><strong>copy</strong></span> the patch (and
                associated packages) into the Exception Channel, and then
                to <span class="strong"><strong>remove</strong></span> the patch (and
                associated packages) from the current deployment landscape.
                Optionally it can be removed from the current quarter’s
                archive channel but it is important to realize that the
                patch will be included in the following quarter’s archive
                as well. It might be tempting to remove it from the SUSE
                Updates channel, but this can often lead to a mishandling
                or misreporting of compliance. It is much better to track
                and <span class="strong"><strong>resolve</strong></span> the reasons
                for the exception in the first place. This way, the patch
                can be reintroduced to the patch deployment workflow and
                re-mediate any potential security issues or code flaws that
                the patch was created to fix.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="sec-securityescal"></a>Security Escalation Channel and Process
                    Definition</h4></div></div></div><p>The process for <span class="strong"><strong>adding</strong></span> a security patch is similar to
                    the process of excluding one. The key difference is
                    that the patch needs to be copied into the Security
                    Exception Channel from either the SUSE Updates channel
                    or the latest archive if it has been created but not
                    used for a promotion cycle yet. Assuming that this
                        <span class="strong"><strong>new</strong></span> critical
                    security patch has been released in the middle of a
                    roll out phase (you have already been promoting the
                    current quarter’s patches and this new one comes out),
                    it is likely that this new patch has not yet appeared
                    in an archive.</p><p>Another assumption is the need to test this new patch
                    by promoting it through the landscapes as any normal
                    patch set, but if necessary it can be copied directly
                    to any stage. Simply <span class="strong"><strong>copy</strong></span> this security patch into the
                    initial landscape (for example DEV - Current) and
                    follow the normal deploy-test-promote cycles to get it
                    into production. Depending on the critical nature of
                    the patch, the normal schedule for testing could be
                    accelerated or in rare cases bypassed altogether
                    assuming acceptable risk.</p></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-components"></a>Components</h3></div></div></div><p>Here is a list of things we will create to enable
                Advanced Patch Lifecycle Management using SUSE Manager 2.1:</p><h4><a id="id1628"></a>Channels</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Archive Channels</p></li><li class="listitem"><p>Current Updates Channels</p></li><li class="listitem"><p>Exception Channels (Patch Exclude or
                            Security-ASAP)</p></li><li class="listitem"><p>Optional SP-Migration Clone Set</p></li></ol></div><h4><a id="id1638"></a>Activation Keys / Bootstraps</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Per-Organization/Per-SLES version Activation
                            Keys</p></li><li class="listitem"><p>Per-Org/Per-SLES version Registration
                            Bootstrap</p></li></ol></div><h4><a id="id1644"></a>Scripts</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Archive Creation Script</p></li><li class="listitem"><p>Archive Sources List Control File</p></li><li class="listitem"><p>Merge Tool Python Script</p></li></ol></div><h4><a id="id1652"></a>Crontab Entries / Automation</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Quarterly (or other frequency) archive
                            creation call</p></li></ol></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-channels"></a>Channels</h3></div></div></div><p>As described in the architecture section above, several
                custom channels will be created to support the patch
                promotion process. These channels will store the archives
                (created as clones of the SUSE Updates channels) and they
                will also store the exception patches. For each landscape a
                custom channel will be created to hold patches that have
                been promoted. These channels will contain more and more
                content over time as patches are promoted each
                cycle.</p><p>For example, during Quarter 1 (Q1) the archive channel
                contains 159 patches, and these are merged into the DEV
                updates channel for SUSE Linux Enterprise Server 11 SP4. As
                SUSE releases patches in an ongoing fashion, when the next
                quarter’s archive is created, Q2 for this example, it
                contains all of the Q1 patches and an additional 130
                patches for a total of 289. The merge function will take
                the 130 new patches (and associated packages) and add them
                to the DEV updates channel during the next patch
                cycle.</p><p>Each new patch cycle updates the available patches in a
                given landscape’s <span class="quote">“<span class="quote">current updates</span>”</span> channel.
                In this way each subsequent patch promotion adds the new
                updates and these can be applied to any hosts subscribed to
                the channel.</p><p>The exception channels will be populated by managing
                individual patches, copying them from one of the landscape
                updates channels or from one of the archive channels. When
                a patch is copied successfully into an exception channel,
                it can be removed from an updates channel or an
                archive.</p><div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a id="sec-creatingchan"></a>Creating the Channels</h4></div></div></div><h5><a id="id1665"></a>Archive Channels:</h5><p>Custom channels are created in SUSE Manager as
                        <span class="quote">“<span class="quote">new</span>”</span>, blank, and empty channels, or
                        <span class="quote">“<span class="quote">clones</span>”</span>. Technically, cloned channels
                    can also be created as empty, but in this case we will
                    create the archive channels with content sourced from
                    the SUSE Updates channel, the patches, AND the packages
                    they reference. Each archive channel will reside within
                    an empty base channel. Base channels will be created
                    for each processor architecture managed by SUSE
                    Manager, for example, IA-32, x86_64, s390x, PPC, etc.
                    Multiple archives matching the different versions of
                    SUSE Linux Enterprise Server can exist in the base
                    channel, but they will all be the same processor
                    architecture.</p><p>Create the base archive channels:</p><p>For each processor architecture used by the hosts
                    that SUSE Manager manages, create empty channels named
                        <span class="quote">“<span class="quote">32-bit Archives Channel</span>”</span> and
                        <span class="quote">“<span class="quote">64-bit Archives Channel</span>”</span>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the Web UI click <span class="quote">“<span class="quote">Channels</span>”</span>
                            then the submenu <span class="quote">“<span class="quote">Manage Software
                                Channels</span>”</span> and click <span class="quote">“<span class="quote">+Create
                                Channel</span>”</span>.</p></li><li class="listitem"><p>The channel label <span class="strong"><strong>must be</strong></span> kept in the format of
                                <span class="quote">“<span class="quote">architecture-patch-archives-channel</span>”</span>,
                            for example the 64-bit channel label should
                            read
                                <span class="quote">“<span class="quote">x86_64-patch-archives-channel</span>”</span>. </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Label the Channels</h3><p>Failing to label these channels
                                appropriately will cause the example
                                archive script to not work properly
                                (without modifications). SUSE Manager is
                                very strict about channel
                                    <span class="quote">“<span class="quote">labels</span>”</span> consisting of
                                lowercase letters, starting with a letter
                                (not a number) and containing no spaces,
                                etc.</p><p>In this example of creating a label
                                starting with <span class="quote">“<span class="quote">x86_64</span>”</span> it is
                                assumed a 32-bit channel might be
                                    <span class="quote">“<span class="quote">i586</span>”</span> or similar.</p></div></li><li class="listitem"><p>These archive channels have <span class="quote">“<span class="quote">NO
                                PARENT</span>”</span>, because they
                                <span class="quote">“<span class="quote">ARE</span>”</span> parent channels.</p></li><li class="listitem"><p>Select the appropriate architecture for this
                            channel: x86_64 for 64-bit, and IA-32 for
                            32-bit, etc..</p></li><li class="listitem"><p>Select the Public radio button for these
                            channels to ensure their visibility to all
                            organizations.</p></li><li class="listitem"><p>Repeat for each architecture type of SUSE
                            Linux Enterprise Server you have
                            deployed.</p></li></ol></div><p>Create the cloned archive channels.</p><p>For each version of SUSE Linux Enterprise Server that
                    is used, create cloned channels:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the Web UI click <span class="quote">“<span class="quote">Channels</span>”</span>
                            then the submenu <span class="quote">“<span class="quote">Manage Software
                                Channels</span>”</span> and click <span class="quote">“<span class="quote">Clone
                                Channel</span>”</span>.</p></li><li class="listitem"><p>Select the SUSE “Updates” channel of the SUSE
                            Linux Enterprise Server version you want to
                            create an archive of as the Source.</p></li><li class="listitem"><p>Make sure to select the radio button for all
                            content/patches.</p></li><li class="listitem"><p>Name the channel appropriately with an
                            indication of Time/Date and what the archive
                            contains, for example, <span class="quote">“<span class="quote">Q3 - 09-30-2015 -
                                Archive of SLES 11 SP3 for
                            x86_64</span>”</span>.</p></li><li class="listitem"><p>Create a label using proper syntax, for
                            example:</p><pre class="screen">q3-09-30-2015-archive-sles11sp3-x86_64</pre></li><li class="listitem"><p>Important: select the appropriate base
                            archive channel to contain the clone.</p></li><li class="listitem"><p>Include an appropriate description of the
                            channel in the Summary and Description
                            fields.</p></li><li class="listitem"><p>Click <span class="quote">“<span class="quote">Create Channel</span>”</span> when
                            finished.</p></li><li class="listitem"><p>Scroll down and select the Public radio
                            button and then click <span class="quote">“<span class="quote">Update
                                Channel</span>”</span>.</p></li><li class="listitem"><p>Repeat for each SUSE Linux Enterprise Server
                            version under each architecture.</p></li></ol></div><p>Optional: Use spacewalk-clone-by-date to create
                    archive channels from the past:</p><p>See the Appendix for an example source file that can
                    be used with the spacewalk-clone-by-date utility. This
                    configuration file can be used to create a clone
                    channel with a certain date range as a filter for the
                    content in the channel:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>The utility is called with the following
                            syntax:</p><pre class="screen">spacewalk-clone-by-date -c "config file"</pre></li><li class="listitem"><p>Repeat this for each archive channel with a
                            past date, modifying the configuration files to
                            match the appropriate dates and channel
                            source/target names.</p></li></ol></div><div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a id="sec-spmigration"></a>Service Pack Migration Support with Update and
                        Exception Channels</h5></div></div></div><p>There are a couple of generally accepted methods
                        to manage a set of channels that allows consistent
                        and expected behaviors when leveraging the service
                        pack migration feature. You can find this feature
                        in the software tab of a particular host. It allows
                        you to update the service pack of a particular host
                        in a one-click fashion. When using the patch
                        lifecycle methods described in this document, some
                        challenges arise when using the service pack
                        migration feature. When you select a given host to
                        do a service pack migration, the UI proposes
                        (dictates) a set of mandatory <span class="quote">“<span class="quote">child</span>”</span>
                        channels that will be subscribed to for a migration
                        action. These mandatory child channels (grayed-out
                        in the UI) will normally include the SUSE provided
                        update channels for a given version of SUSE Linux
                        Enterprise Server.</p><p>See the following screenshot:</p><div class="figure"><a id="id1744"></a><p class="title"><strong>Figure 2. Service Pack Migration</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/screen-sp-migration.png" width="100%" alt="Service Pack Migration" /></td></tr></table></div></div></div><br class="figure-break" /><p>To allow usage of the patch lifecycle processes
                        described here <span class="strong"><strong>and</strong></span> to use the functionality of
                        service pack migrations, it is best to create a
                        full clone-set of the SUSE Linux Enterprise Server
                        product versions in use at your company. This is
                        sometimes called a clone-tree, and can be easily
                        created using the <span class="command"><strong>spacecmd</strong></span>
                        command of the same name,
                            <span class="command"><strong>softwarechannel_clonetree</strong></span>.</p><p>A full clone-tree will include the base/parent
                        channel (normally called a pool) and all child
                        channels that currently exist underneath it. For
                        example, using the SUSE Linux Enterprise Server 11
                        SP3 Pool x86_64 channel as a source, you provide
                        your own <span class="strong"><strong>prefix</strong></span>
                        to the clone-tree command and it will make a copy
                        of the pool and all children adding the prefix to
                        the beginning of all the channel names and
                        labels.</p><p>See below for an image of the original SUSE Linux
                        Enterprise Server 11 SP3 x86_64 channels and the
                        cloned tree with prefix versions
                            <span class="quote">“<span class="quote">Chameleon_Co-</span>”</span> next to it:</p><div class="figure"><a id="id1759"></a><p class="title"><strong>Figure 3. Full Software Channel List for Chameleon
                            Corporation</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/screen-full-sw-channel-list.png" width="100%" alt="Full Software Channel List for Chameleon Corporation" /></td></tr></table></div></div></div><br class="figure-break" /><p>The command <span class="command"><strong>spacecmd
                            softwarechannel_clonetree</strong></span> can be
                        called directly by providing the source and prefix
                        information directly–or interactively by calling
                        the command from within the spacecmd shell
                        itself.</p><p>Example:</p><pre class="screen">spacecmd -u &lt;SMadmin&gt; -- softwarechannel_clonetree -s sles11-sp3-pool-x86_64 -p "my_company-"</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&lt;SMadmin&gt;</h3><p>Make sure to replace &lt;SMadmin&gt; with your SUSE Manager webUI administrator user name!</p></div><p>This command creates a whole set of SUSE Linux
                        Enterprise Server 11 SP3 x86_64 channels with a
                        prefix of <span class="quote">“<span class="quote">my_company</span>”</span>.</p><p>Repeat this process for each version of SUSE
                        Linux Enterprise Server, and then–when using the
                        Service Pack migration feature–you can choose
                            <span class="strong"><strong>your</strong></span> company
                        version of the target version of SUSE Linux
                        Enterprise Server, and choose the child channels
                        appropriate for the landscape the host is in (as
                        described below).</p><p>You can then modify the cloned updates channel by
                        removing all patches/packages, then use the merge
                        script process to merge your <span class="quote">“<span class="quote">Current Patch
                            Set</span>”</span> into the mandatory updates channel.
                        This way you can do service pack migrations, but
                        still retain <span class="strong"><strong>your</strong></span> currently promoted patch set.
                        Otherwise, SP migrations will always update to
                        whatever are the latest packages in the
                            <span class="quote">“<span class="quote">mandatory</span>”</span> updates child
                        channel.</p><p>Consider the following screenshot that shows the
                        Q3 patch archive for SUSE Linux Enterprise Server
                        11 SP4 with 227 packages, the SUSE Updates channel
                        for SP4 with 234 packages, and the Chameleon
                        Corporation version of SP4 Updates with 0 (zero)
                        packages:</p><div class="figure"><a id="id1782"></a><p class="title"><strong>Figure 4. Partial View of Software Channel List for
                            SUSE and Chameleon Corporation</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/screen-sw-channel-list-1.png" width="100%" alt="Partial View of Software Channel List for SUSE and Chameleon Corporation" /></td></tr></table></div></div></div><br class="figure-break" /><p>In the upcoming sections we will describe the
                        creation of custom <span class="quote">“<span class="quote">current updates</span>”</span>
                        channels and how to use a merge script. For service
                        pack migrations using your own set of promoted
                        patches, merge a <span class="quote">“<span class="quote">Current</span>”</span> Patch
                        Archive from a <span class="quote">“<span class="quote">production</span>”</span> channel
                        into the <span class="quote">“<span class="quote">Updates</span>”</span> channel so it will
                        be used for migration efforts–or simply leave the
                            <span class="quote">“<span class="quote">Updates</span>”</span> channel always <span class="strong"><strong>empty</strong></span> and add your
                        Current Updates channel to the <span class="quote">“<span class="quote">Optional
                            Child Channels</span>”</span>” selection.</p><p>With an <span class="strong"><strong>empty</strong></span>
                        <span class="quote">“<span class="quote">Updates</span>”</span> channel and a populated
                            <span class="quote">“<span class="quote">Current Updates</span>”</span>, you can be
                        assured of a service pack migration working as
                        expected and not patching the machine to a version
                        of packages more current than whatever is deemed
                            <span class="quote">“<span class="quote">production</span>”</span>. The custom
                            <span class="quote">“<span class="quote">Updates</span>”</span> channels and the merge
                        script process will be described in detail in the
                        coming sections.</p><h6><a id="id1803"></a><span class="quote">“<span class="quote">Current Updates</span>”</span>
                        Channels:</h6><p>Now create the <span class="quote">“<span class="quote">Current Updates</span>”</span>
                        channels that managed hosts will subscribe to
                        depending on their landscape, for example,
                            <span class="quote">“<span class="quote">DEV - Current Updates - for SLES 11 SP3
                            x86_64</span>”</span>, or <span class="quote">“<span class="quote">PROD - Current
                            Updates - for SLES 12 x86_64</span>”</span>. There
                        will be a full set of landscape channels for each
                        version of SUSE Linux Enterprise Server and they
                        will all be empty to begin with. Create a
                            <span class="quote">“<span class="quote">new</span>”</span> channel and then optionally
                            <span class="quote">“<span class="quote">clone</span>”</span> that one to reduce the
                        amount of typing needed:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>From the <span class="quote">“<span class="quote">Manage Software
                                    Channels</span>”</span> submenu, click
                                    <span class="quote">“<span class="quote">+Create Channel</span>”</span>.</p></li><li class="listitem"><p>Create the channel within one of the SUSE
                                Linux Enterprise Pool Channels or, if you
                                have your own clone set, within that
                                pool.</p></li><li class="listitem"><p>Modify the channel to be Public.</p></li><li class="listitem"><p>Clone this new channel (without updates)
                                into the remaining landscapes, each as a
                                    <span class="quote">“<span class="quote">Current Updates -</span>”</span>
                                channel, and each with the appropriate
                                landscape prefix (for example, <span class="quote">“<span class="quote">DEV -
                                </span>”</span>, <span class="quote">“<span class="quote">TEST - </span>”</span>,
                                    <span class="quote">“<span class="quote">PROD - </span>”</span>, etc.).</p></li><li class="listitem"><p>You should end up with a full set of
                                landscapes for each SUSE Linux Enterprise
                                Server version you are going to manage.
                                Keep in mind for the SUSE Linux Enterprise
                                Server 11 SP1 and SP2 channels this will
                                result in a full set x2 (times 2)–or even
                                x4 (times 4) with LTSS. However, SP1 and
                                SP2 Update channels are not being updated
                                any longer, so they could be subscribed as
                                static channels now. (See the note about
                                LTSS in chapter <a class="xref" href="sec-implement.html#sec-patchpromo" title="Patch Promotion Cycle">the section called “Patch Promotion Cycle”</a>.)</p></li></ol></div><div class="figure"><a id="id1829"></a><p class="title"><strong>Figure 5. Example Screenshot of <span class="quote">“<span class="quote">Current
                                Updates</span>”</span> Channels</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/screen-sw-channel-list-2.png" width="100%" alt="Example Screenshot of “Current Updates” Channels" /></td></tr></table></div></div></div><br class="figure-break" /><h6><a id="id1837"></a><span class="quote">“<span class="quote">Exception</span>”</span>
                        Channels:</h6><p>Now create the two exception channels for each
                        version of SUSE Linux Enterprise Server being
                        managed. While it may be possible to create a mixed
                        channel that is unique to the architecture (like
                        the archive channel base), tracking which
                        distribution a patch exception has come from can
                        get cumbersome. If you mix patches/packages from
                        different versions of SUSE Linux Enterprise Server,
                        it is more difficult to track, resolve, and then
                        reintroduce these patches back into the patch
                        workflow. It is much easier to place them into an
                        exceptions channel specifically for the version of
                        SUSE Linux Enterprise Server the patch came from.
                        Create the <span class="quote">“<span class="quote">Patch Exception</span>”</span> and
                            <span class="quote">“<span class="quote">Security ASAP Exception</span>”</span> channels
                        as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>From the <span class="quote">“<span class="quote">Manage Software
                                    Channels</span>”</span> submenu, click
                                    <span class="quote">“<span class="quote">+Create Channel</span>”</span>.</p></li><li class="listitem"><p>Create the <span class="quote">“<span class="quote">Patch Exceptions - DO
                                    NOT SUBSCRIBE</span>”</span> channel within
                                one of the SUSE Linux Enterprise Server
                                pool channels or, if you have your own
                                clone set, within that pool. This channel
                                will reside next to your landscape
                                channels.</p></li><li class="listitem"><p>Modify the channel to be Public.</p></li><li class="listitem"><p>Create the <span class="quote">“<span class="quote">Security ASAP
                                    Exception</span>”</span> channel as above–it
                                too will reside next to your landscape and
                                patch exceptions channels.</p></li><li class="listitem"><p>For SUSE Linux Enterprise Server 11 SP1
                                and SP2 keep in mind: they reside in the
                                same SP1 Pool base channel, so there will
                                be exceptions and security exceptions
                                channels for each service pack.</p></li></ol></div><div class="figure"><a id="id1857"></a><p class="title"><strong>Figure 6. Example Screenshot of
                                <span class="quote">“<span class="quote">Exceptions</span>”</span> Channels</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/screen-sw-channel-list-3.png" width="100%" alt="Example Screenshot of “Exceptions” Channels" /></td></tr></table></div></div></div><br class="figure-break" /></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-actkeys"></a>Activation Keys / Bootstraps</h3></div></div></div><p>Typically you will have already created a set of
                Activation Keys assigned to a specific version of SUSE
                Linux Enterprise Server that your hosts are installed with.
                There may be other characteristics assigned in your keys
                like System Groups, assorted Child Channels, Software
                Packages, etc. You can choose to modify your existing
                Activation Keys and reuse them, or you can create new keys
                for this implementation. This example assumes a new
                key.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Within the <span class="quote">“<span class="quote">Systems</span>”</span> menu -&gt; click
                        the <span class="quote">“<span class="quote">Activation Keys</span>”</span> submenu from the
                        left panel.</p></li><li class="listitem"><p>Click <span class="quote">“<span class="quote">+Create Key</span>”</span> in the upper
                        right.</p></li><li class="listitem"><p>Create the Activation Key within this
                        Organization (remember to log in to other
                        Organizations to create keys there if needed).
                        Assign the appropriate entitlements, software
                        packages, and configuration channels as
                        appropriate.</p></li><li class="listitem"><p>Name the Activation Key according to the
                            <span class="strong"><strong>Landscape</strong></span>
                        host you will register to with this key.</p><p>Example:</p><div class="figure"><a id="id1882"></a><p class="title"><strong>Figure 7. Create Activation Key Screenshot</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/screen-act-key-details.png" width="100%" alt="Create Activation Key Screenshot" /></td></tr></table></div></div></div><br class="figure-break" /></li><li class="listitem"><p><span class="strong"><strong>Important:</strong></span>
                        Click on the Child Channels Tab. Now you can assign
                        the appropriate Current Updates channel depending
                        on which <span class="strong"><strong>Landscape</strong></span> this key is for.</p><p>Example:</p><div class="figure"><a id="id1894"></a><p class="title"><strong>Figure 8. Child Channels Screenshot</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="images/screen-child-channels.png" width="100%" alt="Child Channels Screenshot" /></td></tr></table></div></div></div><br class="figure-break" /></li><li class="listitem"><p>Select the appropriate SUSE Manager Tools channel
                        and the other needed channels to fill out
                        the requirements for the version of SUSE Linux
                        Enterprise Server in question.</p></li><li class="listitem"><p>Note that the <span class="strong"><strong>Security
                            ASAP Exceptions</strong></span> channel <span class="strong"><strong>is</strong></span> selected as an
                        active child channel, and the <span class="strong"><strong>Patch Exceptions (DO NOT
                            SUBSCRIBE)</strong></span> channel is <span class="strong"><strong>not</strong></span> selected. This is
                        important, because any patch/package copied into
                        the Patch Exceptions channel should remain
                        invisible to hosts while patches/packages copied to
                        the Security ASAP Exceptions channel should always
                        be immediately visible to a host.</p></li></ol></div><p>The Activation Key is called by a bootstrap script–often
                there is a one-to-one relationship between a registration
                bootstrap script and an activation key. Whether new
                activation keys were created or existing ones were modified
                to point to the landscape specific <span class="quote">“<span class="quote">current
                    updates</span>”</span> channels, there should be a bootstrap
                script that calls that activation key.</p><p>All new hosts will use these bootstraps to register and
                become managed by SUSE Manager. One of the key benefits is
                that they should never need to change their channel
                assignments, as the host will now be assigned to its proper
                landscape update channels and will receive new updates as
                they are promoted each patch cycle. We will discuss
                promotion in the next section <a class="xref" href="sec-implement.html#sec-scripts" title="Scripts">the section called “Scripts”</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-scripts"></a>Scripts</h3></div></div></div><h4><a id="id1915"></a>Patch/Package Merge Script:</h4><p>The <span class="quote">“<span class="quote">Patch/Package Merge</span>”</span> script is used to
                    <span class="strong"><strong>promote</strong></span> patches (and
                relevant packages) from one channel to another. It is used
                at first to merge content from an Archive channel into the
                first stage (<span class="strong"><strong>landscape</strong></span>),
                for example DEV. It is then used to promote content from
                one stage to the next until the content reaches the final
                stage. This process is then repeated for each version of
                SUSE Linux Enterprise Server (like 11 SP1, SP2, etc.) and
                each corporate environment (like STORE, CORP, etc.).</p><p>Finally, the entire process is repeated for each patch
                calendar cycle (quarterly/monthly/etc.).</p><h4><a id="id1921"></a>Channel Archive Creation Script / Channel Archive
                Sources List Configuration File:</h4><p>This script and its associated <span class="quote">“<span class="quote">sources
                    list</span>”</span> configuration file are called either
                manually or by a crontab entry. The script uses the sources
                list file to determine which versions of SUSE Linux
                Enterprise Server and which architectures to create
                archives for. As previously described, the Archive channels
                are created as point-in-time clones of the various SUSE
                Linux Enterprise Server Updates channels.</p><p>To have the correct Archive channels created, simply add
                lines to the sources file. Each line has three fields, the
                first being the architecture, the second being the source
                channel, and the third being target channel text. The
                script parses the source list and constructs the target
                parent channel for the archives by architecture, and then
                constructs the target channel and label, etc.</p><p>The script calls the <span class="command"><strong>spacecmd</strong></span>
                functions <span class="command"><strong>softwarechannel_clone</strong></span> and
                    <span class="command"><strong>softwarechannel_setorgaccess</strong></span> for
                each entry in the sources list. It calculates the current
                calendar quarter, creates the archives and makes these
                archives publicly visible. See the Appendix for the entire
                script.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-crontab"></a>Crontab Entries / Automation</h3></div></div></div><h4><a id="id1931"></a>Schedule-based Trigger for Archive Creation Script
                (Quarter-End)</h4><p>A decision needs to be made whether a calendar quarter is
                going to get created (looking backward) at the end of a
                particular month, or at the beginning of a month (one day
                past the final day of a quarter). Since the Archive
                channels are getting created by cloning the SUSE Updates
                channels of a particular SLES version, the decision can
                affect the content.</p><p>Either way is fine as it will be consistent from quarter
                to quarter. For the purposes of explaining the cron syntax,
                we will opt to show the more difficult of the two: how to
                call the archive script at the end of the quarter. This is
                more difficult simply because it requires two cron entries
                to handle both the 30<sup>th</sup> of the
                month (for June and September) and the
                    31<sup>st</sup> of the month (for March
                and December).</p><p>The crontab entries will point to the archive creation
                script and execute in months 3, 6, 9, and 12. Here are what
                the cron entries look like: </p><pre class="screen">0 0 30 6,9 * /path/to/the/archive/script</pre><pre class="screen">0 0 31 3,12 * /path/to/the/archive/script</pre><p>The path will point to the actual
                archive-channel-create-script.sh (or similar). This could
                be placed in /usr/sbin/ and must be made <span class="italic">executable</span> (chmod +x).</p><p>Also it is very important to note that this script is
                calling <span class="command"><strong>spacecmd</strong></span> commands from within a
                Bash shell script. Spacecmd is itself a python-based shell
                that can be invoked–allowing the use of an extensive set of
                commands <span class="strong"><strong>within</strong></span> the
                shell, or from outside the shell as a mediated command
                interpreter.</p><p>The invocation of spacecmd stores a <span class="strong"><strong>.spacecmd</strong></span> directory in the
                invoking user`s home directory. Within the .spacecmd
                directory is a configuration file that can store credential sets
                that can be leveraged to avoid being prompted at
                spacecmd execution. This can be used to store credentials
                so the cron job will execute and not pause waiting for
                authentication credentials to be passed.</p><p>The crontab entries will point to the archive creation
                script and execute in months 3, 6, 9, and 12. Here are what
                the cron entries look like:</p><p>
                <em class="parameter"><code>[spacecmd]</code></em>
            </p><p>
                <em class="parameter"><code>server=localhost</code></em>
            </p><p>
                <em class="parameter"><code>username=admin</code></em>
            </p><p>
                <em class="parameter"><code>password=suse1234</code></em>
            </p><p>
                <em class="parameter"><code>nossl=0</code></em>
            </p><p>Storing these credentials will allow
                    <span class="command"><strong>spacecmd</strong></span> operations from the SUSE
                Manager’s root user to be executed without the need to pass
                user name or password–allowing the cron job for archive
                creation to run without failure at the appropriate
                time.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="index.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="sec-usage.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Advanced Patch Lifecycle Management with SUSE
            Manager </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Usage Workflows</td></tr></table></div></body></html>