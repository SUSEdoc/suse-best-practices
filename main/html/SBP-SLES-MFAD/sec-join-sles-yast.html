<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Domain Join SUSE Linux Enterprise Server Using YaST</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><style type="text/css">
body { background-image: url('static/images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="Joining a SUSE Linux Enterprise Server to a Microsoft Azure Active Directory Domain Services Managed Domain" /><link rel="up" href="index.html" title="Joining a SUSE Linux Enterprise Server to a Microsoft Azure Active Directory Domain Services Managed Domain" /><link rel="prev" href="sec-ssh-certificate.html" title="Connect Via SSH Using Your Certificate" /><link rel="next" href="sec-more-info.html" title="More Information" /></head><body onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Domain Join SUSE Linux Enterprise Server Using YaST</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="sec-ssh-certificate.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="sec-more-info.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sec-join-sles-yast"></a>Domain Join SUSE Linux Enterprise Server Using YaST</h2></div></div></div><p>Now that you can access the SUSE Linux Enterprise Server
            virtual machine, you need to join to the domain controller that
            Azure AD Domain Services provides. Since the VM is in the same
            VNet and you have updated the DNS settings for the VNet, the
            new Linux machine can locate the domain controller by name
            without any further configuration with the command
                <span class="command"><strong>sudo /sbin/yast</strong></span>:</p><pre class="screen">myadmin@kirke-suse-aad:~&gt; sudo /sbin/yast</pre><p>This command opens the YaST Control Center. Choose
                <span class="quote">“<span class="quote">Network Services</span>”</span> and <span class="quote">“<span class="quote">Windows Domain
                Membership</span>”</span>.</p><div class="figure"><a id="id1352"></a><p class="title"><strong>Figure 15. YaST Control Center - Overview</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td><img src="images/azure-yast-control.png" width="100%" alt="YaST Control Center - Overview" /></td></tr></table></div></div></div><br class="figure-break" /><p>You are prompted to install the Samba client packages.</p><div class="figure"><a id="id1353"></a><p class="title"><strong>Figure 16. YaST Control Center - Samba Client Packages</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td><img src="images/azure-samba-client.png" width="100%" alt="YaST Control Center - Samba Client Packages" /></td></tr></table></div></div></div><br class="figure-break" /><p>Next, provide your domain as all capital letters, and enable
            the settings in the top section to enable users to SSH to the
            machine using their credentials from Azure AD. </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Custom Domain</h3><p>For the example at hand, a cloud-only directory without a
                custom domain is used. If you added and verified a custom
                domain, and have users from that custom domain in your AAD
                directory from a synchronization, then you should use your
                custom domain.</p></div><div class="figure"><a id="id1354"></a><p class="title"><strong>Figure 17. YaST Control Center - Windows Domain Membership</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td><img src="images/azure-windows-domain-membership.png" width="100%" alt="YaST Control Center - Windows Domain Membership" /></td></tr></table></div></div></div><br class="figure-break" /><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Backspace</h3><p>If <span class="quote">“<span class="quote">Backspace</span>”</span> does not work, use <span class="strong"><strong>CTRL+H</strong></span> to backspace.</p></div><p>When you are done, exit and reboot the VM.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">YaST</h3><p>If you want to understand in detail what the YaST tool
                did in the background, read the article <span class="quote">“<span class="quote">How to
                    integrate SUSE Linux Enterprise 11 with Windows Active
                    Directory</span>”</span> at <a class="link" href="https://jreypo.wordpress.com/2012/02/01/how-to-integrate-suse-linux-enterprise-11-with-windows-active-directory/" target="_top">https://jreypo.wordpress.com/2012/02/01/how-to-integrate-suse-linux-enterprise-11-with-windows-active-directory/</a>
                /&gt;.This article provides a comprehensive look at the files
                it edited and the values it used.</p></div><p>You can now log in using the same credentials that you use to
            log in to Azure AD:</p><pre class="screen">ssh blueskyabove\\kirkevans@52.173.77.97 -p 62075</pre><p>Connect via SSH using your credentials from Azure AD. A home
            directory has been created for the user. </p><div class="figure"><a id="id1355"></a><p class="title"><strong>Figure 18. Connect from Azure AD Via SSH</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td><img src="images/azure-ssh-home-directory.png" width="100%" alt="Connect from Azure AD Via SSH" /></td></tr></table></div></div></div><br class="figure-break" /><p>The user is not contained in the <span class="quote">“<span class="quote">sudo-ers</span>”</span>
            group. It is possible to enable users from a particular Active
            Directory group to use <span class="command"><strong>sudo</strong></span>. For more
            information regarding this topic, read the article
                <span class="quote">“<span class="quote">Adding AD domain groups to /etc/sudoers</span>”</span> at
                <a class="link" href="https://derflounder.wordpress.com/2012/12/14/adding-ad-domain-groups-to-etcsudoers/" target="_top">https://derflounder.wordpress.com/2012/12/14/adding-ad-domain-groups-to-etcsudoers/</a>
            .</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sec-ssh-certificate.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="sec-more-info.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Connect Via SSH Using Your Certificate </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> More Information</td></tr></table></div></body></html>