<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SUSE Best Practices for SAP HANA on KVM</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><meta name="description" content="This best practice document describes how SUSE Linux Enterprise Server for SAP Applications 12 SP2 with KVM should be configured to run SAP HANA for use in production environments. Configurations which are not set up according to this best practice guide are considered as unsupported by SAP for production workloads. While this document is not compulsory for non-production SAP HANA workloads, it may still be useful to help ensure optimal performance in such scenarios. Disclaimer: Documents published as part of the SUSE Best Practices series have been contributed voluntarily by SUSE employees and third parties. They are meant to serve as examples of how particular actions can be performed. They have been compiled with utmost attention to detail. However, this does not guarantee complete accuracy. SUSE cannot verify that actions described in these documents do what is claimed or whether actions described have unintended consequences. SUSE LLC, its affiliates, the authors, and the translators may not be held liable for possible errors or the consequences thereof." /><style type="text/css">
body { background-image: url('static/images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="SUSE Best Practices for SAP HANA on KVM" /><link rel="next" href="sec-supported-scenarios-prerequisites.html" title="Supported Scenarios and Prerequisites" /></head><body onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">SUSE Best Practices for SAP HANA on KVM </th></tr><tr><td width="20%" align="left"> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="sec-supported-scenarios-prerequisites.html">Next</a></td></tr></table><hr /></div><div xml:lang="en" class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="art-sbp-hanaonkvm-sles12sp2"></a>SUSE Best Practices for SAP HANA on KVM </h1></div><div><h3 class="subtitle"><em>SUSE Linux Enterprise Server for SAP Applications 12 SP2</em></h3></div><div><div class="author"><h3 class="author"><span class="firstname">Matt</span> <span class="surname">Fleming, Senior Software Engineer, SUSE</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Lee</span> <span class="surname">Martin, SAP Architect &amp; Technical Manager, SUSE</span></h3></div></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><p>This best practice document describes how SUSE Linux Enterprise Server for SAP
        Applications 12 SP2 with KVM should be configured to run SAP HANA for use in production
        environments. Configurations which are not set up according to this best practice guide are
        considered as unsupported by SAP for production workloads.</p><p>While this document is not compulsory for non-production SAP HANA workloads, it may
      still be useful to help ensure optimal performance in such scenarios.</p><p>
        <span class="strong"><strong>Disclaimer: </strong></span>
        Documents published as part of the SUSE Best Practices series have been contributed voluntarily
        by SUSE employees and third parties. They are meant to serve as examples of how particular
        actions can be performed. They have been compiled with utmost attention to detail. However,
        this does not guarantee complete accuracy. SUSE cannot verify that actions described in these
        documents do what is claimed or whether actions described have unintended consequences.
        SUSE LLC, its affiliates, the authors, and the translators may not be held liable for possible errors
        or the consequences thereof.
      </p></div></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="sect1"><a href="index.html#sec-introduction">Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="index.html#sec-definitions">Definitions</a></span></dt><dt><span class="sect2"><a href="index.html#sec-sap-hana-virtualization-scenarios">SAP HANA Virtualization Scenarios</a></span></dt></dl></dd><dt><span class="sect1"><a href="sec-supported-scenarios-prerequisites.html">Supported Scenarios and Prerequisites</a></span></dt><dd><dl><dt><span class="sect2"><a href="sec-supported-scenarios-prerequisites.html#sec-supported-scenarios">Supported Scenarios</a></span></dt><dt><span class="sect2"><a href="sec-supported-scenarios-prerequisites.html#sec-sizing">Sizing</a></span></dt><dt><span class="sect2"><a href="sec-supported-scenarios-prerequisites.html#sec-kvm-hypervisor-version">KVM Hypervisor Version</a></span></dt><dt><span class="sect2"><a href="sec-supported-scenarios-prerequisites.html#sec-hypervisor-hardware">Hypervisor Hardware</a></span></dt><dt><span class="sect2"><a href="sec-supported-scenarios-prerequisites.html#sec-guest-vm">Guest VM</a></span></dt></dl></dd><dt><span class="sect1"><a href="sec-hypervisor.html">Hypervisor</a></span></dt><dd><dl><dt><span class="sect2"><a href="sec-hypervisor.html#sec-kvm-hypervisor-installation">KVM Hypervisor Installation</a></span></dt><dt><span class="sect2"><a href="sec-hypervisor.html#sec-configure-networking-on-hypervisor">Configure Networking on Hypervisor</a></span></dt><dt><span class="sect2"><a href="sec-hypervisor.html#sec-storage-hypervisor">Storage Configuration on Hypervisor</a></span></dt><dt><span class="sect2"><a href="sec-hypervisor.html#sec-hypervisor-operating-system-configuration">Hypervisor Operating System Configuration</a></span></dt></dl></dd><dt><span class="sect1"><a href="sec-Guest-VM-XML-Configuration.html">Guest VM XML Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="sec-Guest-VM-XML-Configuration.html#sec-create-an-initial-guest-vm-xml">Create an Initial Guest VM XML</a></span></dt><dt><span class="sect2"><a href="sec-Guest-VM-XML-Configuration.html#sec-global-vcpu-configuration">Global vCPU Configuration</a></span></dt><dt><span class="sect2"><a href="sec-Guest-VM-XML-Configuration.html#sec-vCPU-and-vNUMA-Topology">vCPU and vNUMA Topology</a></span></dt><dt><span class="sect2"><a href="sec-Guest-VM-XML-Configuration.html#sec-storage">Storage</a></span></dt><dt><span class="sect2"><a href="sec-Guest-VM-XML-Configuration.html#sec-memory-backing">Memory Backing</a></span></dt><dt><span class="sect2"><a href="sec-Guest-VM-XML-Configuration.html#sec-virtio-rng">Virtio Random Number Generator (RNG) Device</a></span></dt></dl></dd><dt><span class="sect1"><a href="sec-Guest-Operating-System.html">Guest Operating System</a></span></dt><dd><dl><dt><span class="sect2"><a href="sec-Guest-Operating-System.html#sec-install-sles-for-sap-inside-the-guest-vm">Install SUSE Linux Enterprise Server for SAP Applications Inside the Guest VM</a></span></dt><dt><span class="sect2"><a href="sec-Guest-Operating-System.html#sec-guest-operating-system-configuration-for-sap-hana">Guest Operating System Configuration for SAP HANA</a></span></dt><dt><span class="sect2"><a href="sec-Guest-Operating-System.html#sec-guest-operating-system-storage-configuration-for-sap-hana-volumes">Guest Operating System Storage Configuration for SAP HANA Volumes</a></span></dt></dl></dd><dt><span class="sect1"><a href="sec-administration.html">Administration</a></span></dt><dd><dl><dt><span class="sect2"><a href="sec-administration.html#sec-useful-commands-on-the-hypervisor">Useful Commands on the Hypervisor</a></span></dt><dt><span class="sect2"><a href="sec-administration.html#sec-useful-commands-inside-the-vm-guest">Useful Commands Inside the VM Guest</a></span></dt></dl></dd><dt><span class="sect1"><a href="sec-examples.html">Examples</a></span></dt><dd><dl><dt><span class="sect2"><a href="sec-examples.html#sec-example-lscpu-from-a-lenovo-x3850-x6">Example <span class="quote">“<span class="quote">lscpu</span>”</span> from a Lenovo x3850 x6</a></span></dt><dt><span class="sect2"><a href="sec-examples.html#sec-lscpu-extended-example">Example <span class="quote">“<span class="quote">lscpu --extended=CPU,SOCKET,CORE</span>”</span> from a Lenovo x3850 x6</a></span></dt><dt><span class="sect2"><a href="sec-examples.html#sec-example-lstopo">Example <span class="quote">“<span class="quote">lstopo-no-graphics</span>”</span> from a Lenovo x3850 x6</a></span></dt><dt><span class="sect2"><a href="sec-examples.html#sec-example-guest-vm-xml-based-on-the-example-lenovo-x3850-x6-above">Example Guest VM XML Based on the Example Lenovo x3850 x6 Above</a></span></dt></dl></dd><dt><span class="sect1"><a href="sec-additional-information.html">Additional Information</a></span></dt><dd><dl><dt><span class="sect2"><a href="sec-additional-information.html#sec-resources">Resources</a></span></dt><dt><span class="sect2"><a href="sec-additional-information.html#sec-feedback">Feedback</a></span></dt><dt><span class="sect2"><a href="sec-additional-information.html#sec-version-history">Version History</a></span></dt></dl></dd><dt><span class="sect1"><a href="ar01s09.html">Legal notice</a></span></dt><dt><span class="sect1"><a href="ar01s10.html">GNU Free Documentation License</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sec-introduction"></a>Introduction</h2></div></div></div><p>This best practice document describes how SUSE Linux Enterprise Server for SAP
      Applications 12 SP2 with KVM should be configured to run SAP HANA for use in production
      environments. The setup of the SAP HANA system or other components like HA clusters are beyond
      the scope of this document.</p><p>The following sections describe how to set up and configure the three KVM components
      required to run SAP HANA on KVM:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="strong"><strong>
            <a class="xref" href="sec-hypervisor.html" title="Hypervisor">the section called “Hypervisor”</a>
          </strong></span> - The host operating system running the Hypervisor directly on the server
          hardware</p></li><li class="listitem"><p><span class="strong"><strong>
            <a class="xref" href="sec-Guest-VM-XML-Configuration.html" title="Guest VM XML Configuration">the section called “Guest VM XML Configuration”</a>
          </strong></span> - The libvirt domain XML description of the guest VM</p></li><li class="listitem"><p><span class="strong"><strong>
            <a class="xref" href="sec-Guest-Operating-System.html" title="Guest Operating System">the section called “Guest Operating System”</a>
          </strong></span> - The operating system inside the VM where SAP HANA is running</p></li></ul></div><p>Follow <span class="strong"><strong>
        <a class="xref" href="sec-supported-scenarios-prerequisites.html" title="Supported Scenarios and Prerequisites">the section called “Supported Scenarios and Prerequisites”</a>
      </strong></span> and the respective SAP Notes to ensure a supported configuration. Most of the
      configuration options are specific to the libvirt package and therefore require modifying the
      VM guest’s domain XML file.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-definitions"></a>Definitions</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Hypervisor: The software running directly on the physical sever to create and run
            VMs (Virtual Machines).</p></li><li class="listitem"><p>Virtual Machine: is an emulation of a computer.</p></li><li class="listitem"><p>Guest OS: The Operating System running inside the VM (Virtual Machine). This is the
            OS running SAP HANA and therefore the one that should be checked for SAP HANA support as
            per SAP Note 2235581 <span class="quote">“<span class="quote">SAP HANA: Supported Operating Systems</span>”</span> (<a class="link" href="https://launchpad.support.sap.com/#/notes/2235581" target="_top">https://launchpad.support.sap.com/#/notes/2235581</a>) and the <span class="quote">“<span class="quote">SAP HANA
              Hardware Directory</span>”</span> (<a class="link" href="https://www.sap.com/dmc/exp/2014-09-02-hana-hardware/enEN/appliances.html" target="_top">https://www.sap.com/dmc/exp/2014-09-02-hana-hardware/enEN/appliances.html</a>).</p></li><li class="listitem"><p>Paravirtualization: Allows direct communication between the Hypervisor and the VM
            Guest resulting in a lower overhead and better performance.</p></li><li class="listitem"><p>libvirt: A management interface for KVM.</p></li><li class="listitem"><p>qemu: The virtual machine emulator, also seen a process on the Hypervisor running
            the VM.</p></li><li class="listitem"><p>SI units: Some commands and configurations use the decimal prefix (for example GB),
            while other use the binary prefix (for example GiB). In this document we use the binary
            prefix where possible.</p></li></ul></div><p>For a general overview of the technical components of the KVM architecture, refer to
          <a class="link" href="https://documentation.suse.com/sles/12-SP4/html/SLES-all/cha-kvm-intro.html" target="_top">https://documentation.suse.com/sles/12-SP4/html/SLES-all/cha-kvm-intro.html</a></p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a id="sec-sap-hana-virtualization-scenarios"></a>SAP HANA Virtualization Scenarios</h3></div></div></div><p>SAP supports virtualization technologies for SAP HANA usage on a per scenario
        basis:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Single-VM - One VM per Hypervisor/physical server for SAP HANA Scale-Up (NOTE: SAP
            does not allow any other VM or workload on the same server)</p></li><li class="listitem"><p>Multi-VM - Multiple VM’s per Hypervisor/physical server for SAP HANA
            Scale-Up</p></li><li class="listitem"><p>Scale-Out - For SAP HANA Scale-Out</p></li></ul></div><p>See SAP Notes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>SAP Note 2284516 <span class="quote">“<span class="quote">SAP HANA virtualized on SUSE Linux Enterprise
              Hypervisors</span>”</span> (<a class="link" href="https://launchpad.support.sap.com/#/notes/2284516" target="_top">https://launchpad.support.sap.com/#/notes/2284516</a>) for details</p></li><li class="listitem"><p>SAP Note 2607144 <span class="quote">“<span class="quote">SAP HANA on KVM included with SLES for SAP Applications 12
              SP2 in production</span>”</span> (<a class="link" href="https://launchpad.support.sap.com/#/notes/2607144" target="_top">https://launchpad.support.sap.com/#/notes/2607144</a>)</p></li></ul></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="sec-supported-scenarios-prerequisites.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"> </td><td width="40%" align="right" valign="top"> Supported Scenarios and Prerequisites</td></tr></table></div></body></html>